using Azure.Messaging;
using Core.TuristickaAgencija.Models;
using Microsoft.EntityFrameworkCore;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using TuristickaAgenija.Repository;

namespace Repository.TuristickaAgenija.Repositories
{
    public interface IUsersRepository
    {
        Users GetByLogin(string username, string password);
        Users GetById(int id);
        Users? GetByEmail(string email);
        List<Users> getAll();
        string getImgById(int id);
    }
    public class UsersRepository: Repository<Users>, IUsersRepository
    {
        DbSet<Users> _dbSet;
        public UsersRepository(TuristickaAgencijaDbContext db):base(db)
        {
            _dbSet=db.Set<Users>();
        }

        public List<Users> getAll()
        {
           return _dbSet.ToList();
        }

        public Users? GetByEmail(string email)
        {
            return _dbSet.Where(x=>x.Email == email).FirstOrDefault();
        }

        public Users? GetById(int id)
        {
            return _dbSet.Where(x=>x.UsersID==id).FirstOrDefault();
        }

        public Users? GetByLogin(string username, string password)
        {
            
            var user= _dbSet.Where(x => x.Username == username && x.Password == password).FirstOrDefault();
            if (user != null)
            {
                return user;
            }
            else
            {
                return new Users();
            }
        }

        public string getImgById(int id)
        {
            var img= _dbSet.Where(x => x.UsersID == id).FirstOrDefault()?.ProfileImageBase64;
            if (img == null)
            {
                img = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/4QBWRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAAEsAAAAAQAAASwAAAAB/+0ALFBob3Rvc2hvcCAzLjAAOEJJTQQEAAAAAAAPHAFaAAMbJUccAQAAAgAEAP/hDIFodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0n77u/JyBpZD0nVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkJz8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0nYWRvYmU6bnM6bWV0YS8nIHg6eG1wdGs9J0ltYWdlOjpFeGlmVG9vbCAxMS44OCc+CjxyZGY6UkRGIHhtbG5zOnJkZj0naHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyc+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczp0aWZmPSdodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyc+CiAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICA8dGlmZjpYUmVzb2x1dGlvbj4zMDAvMTwvdGlmZjpYUmVzb2x1dGlvbj4KICA8dGlmZjpZUmVzb2x1dGlvbj4zMDAvMTwvdGlmZjpZUmVzb2x1dGlvbj4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6eG1wTU09J2h0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8nPgogIDx4bXBNTTpEb2N1bWVudElEPmFkb2JlOmRvY2lkOnN0b2NrOjcyOWE2MzEzLWZlZTItNGQ2Yi1iNTgxLTJjN2I4MWE5OWE5NjwveG1wTU06RG9jdW1lbnRJRD4KICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjc3NGE0ZTllLTE1OTctNDAyYy04YWFmLTllOGIxYjdlYTZlNzwveG1wTU06SW5zdGFuY2VJRD4KIDwvcmRmOkRlc2NyaXB0aW9uPgo8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSd3Jz8+/9sAQwAFAwQEBAMFBAQEBQUFBgcMCAcHBwcPCwsJDBEPEhIRDxERExYcFxMUGhURERghGBodHR8fHxMXIiQiHiQcHh8e/9sAQwEFBQUHBgcOCAgOHhQRFB4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4e/8AAEQgBaAFoAwEiAAIRAQMRAf/EABsAAQACAwEBAAAAAAAAAAAAAAADBAECBQYI/8QAOhABAAIBAgIGCAMHBAMAAAAAAAECAwQRITEFEhVBUWEiMlNxgZGSsRNC0QZSVGKCoaIjM8Hh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";
            }
            return img;
        }
    }
}
